<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <title>Тут название страницы написать</title>
    <meta name="description" content="Описание страницы">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <link href="../favicon.ico" rel="shortcut icon">
    <link rel="preload" href="/assets/fonts/Montserrat/Montserrat-SemiBold.woff2" as="font" crossorigin="anonymous">
    <link rel="preload" href="/assets/fonts/Montserrat/Montserrat-Light.woff2" as="font" crossorigin="anonymous">
    <link rel="preload" href="/assets/fonts/Montserrat/Montserrat-Medium.woff2" as="font" crossorigin="anonymous">
    <link rel="preload" href="/assets/fonts/Montserrat/Montserrat-ExtraBold.woff2" as="font" crossorigin="anonymous">
    <link rel="stylesheet" href="/assets/css/fonts.min.css?v=87821122">
    <link rel="stylesheet" href="/assets/css/basic.min.css?v=87821122">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/assets/css/extra.min.css?v=87821122">
    <link rel="stylesheet" href="/static/assets/css/DownloadBookWindowStyle.css">
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <script defer src="/assets/js/scripts.min.js?v=87821122"></script>
    <style>
        #myPopup{
            width: 300px;
            height: 220px;
            padding: 18px 9px;
            border-radius: 4px;
            background: #fafafa;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: auto;
            <!--display: none;-->
            opacity: 0;
            z-index: 2;
            text-align: center;
        }

        #myPopup #myPopup__close{
            width: 21px;
            height: 21px;
            position: absolute;
            top: 10px;
            right: 11px;
            cursor: pointer;
            display: block;
            font-size: 29px;
        }

        #myOverlay{
            z-index: 1;
            position: fixed;
            background-color: rgba(0,0,0, .7);
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            cursor: pointer;
            display: none;
        }
    </style>
</head>
<body class="Site">
<header class="Header" th:replace="~{fragments/common_header_fragment :: head(status='unauthorized')}"></header>
<div class="Middle">
    <div class="wrap">
        <main class="Middle-main">
            <ul class="breadcrumbs"
                th:replace="~{fragments/breadcrumb_fragment :: breadcrumps(category='Мара и Морок')}"></ul>
            <div class="Product">
                <div class="ProductCard">
                    <div class="ProductCard-look">
                        <div class="ProductCard-photo">
                            <img th:src="${bookBySelect.image}" alt="card.jpg"/>
                        </div>
                    </div>
                    <div class="ProductCard-desc"
                         th:replace="~{fragments/book_description_fragment :: bookDesc(book = ${bookBySelect})}"></div>
                    <form id="uploadForm" th:attr="action='upload-file/'+ ${bookBySelect.slug}"  role="form" method="post" enctype=multipart/form-data>
                        <input type="file" id="file" name="file">
                        <input type=submit value=Upload>
                    </form>

                </div>
                <div class="Product-comments">
                    <div class="Product-comments-header">
                        <h3 class="Product-comments-title">Отзывы
                        </h3><span class="Product-comments-amount">567 отзывов</span>
                    </div>
                </div>
                <div th:replace="~{fragments/book_reviews_fragment :: reviewBlock}"></div>
            </div>
        </main>
    </div>
</div>
<footer class="Footer" th:replace="~{fragments/common_footer_fragment :: footer}"></footer>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    function showPanelDownload(){
        if(document.getElementById('myPopup').style.display === 'none'){
            document.getElementById('myPopup').style.display = 'block'}
    }
    function closePanelDownload(){
        if(document.getElementById('myPopup').style.display === 'block'){
            document.getElementById('myPopup').style.display = 'none'}
    }
    // function buyBookButton(){
    //     const data = new FormData(document.getElementById('buyBook'))
    //     axios.post('http://192.168.1.222:8080/upload', data, {
    //         headers: {
    //             'Content-Type': 'application/json'
    //         }
    //         .then(response =>{
    //
    //         })
    //     })
    // }
</script>
<script>
    import axios from 'axios'
    export default {
        name: 'hello',
        data () {
            return {
                msg: 'Welcome to Your Vue.js App'
            }
        },
        methods: {
            uploadFiles () {
                var s = this
                const data = new FormData(document.getElementById('uploadForm'))
                let imagefile = document.querySelector('#file')
                console.log(imagefile)
                data.append('file', imagefile.files[0])
                axios.post('http://192.168.1.222:8080/upload', data, {
                    headers: {
                        'Content-Type': 'multipart/form-data'
                    }
                })
                    .then(response => {
                        console.log(response)
                    })
                    .catch(error => {
                        console.log(error.response)
                    })
            }
        }
    }
</script>
<script>
    function keptBook(){
            alert(data.bookId)
            axios.post('http://192.168.1.222:8080/books/changeBookStatusKept/', data.bookId)
                .then(response => {
                    console.log(response)
                })
                .catch(error => {
                    console.log(error.response)
                })
    }

</script>
<!--<script src="/assets/plg/jQuery/jquery-3.5.1.min.js"></script>-->
<!--<script src="/assets/js/UploadNewBookImageScript.js"></script>-->
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
<!--<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>-->

</body>
</html>